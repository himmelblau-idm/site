<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://himmelblau-idm.org/docs/reference/himmelblau-conf/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Himmelblau conf - Himmelblau Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Himmelblau conf";
        var mkdocs_page_input_path = "reference/himmelblau-conf.md";
        var mkdocs_page_url = "/docs/reference/himmelblau-conf/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script>
   
  <script type="text/javascript" data-cmp-ab="1" src="https://cdn.consentmanager.net/delivery/autoblocking/8bffa521a2c48.js" data-cmp-host="c.delivery.consentmanager.net" data-cmp-cdn="cdn.consentmanager.net" data-cmp-codesrc="16"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Himmelblau Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="https://himmelblau-idm.org/">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Quickstart</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../registration/">Device Registration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../integration/">Migration from On-Prem</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../ecosystem/">Ecosystem</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../aad-tool/">Aad tool</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Himmelblau conf</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../himmelblaud/">Himmelblaud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../himmelblaud_tasks/">Himmelblaud tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pam_himmelblau/">Pam himmelblau</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced Topics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Cloud-Kerberos-Trust-for-Linux/">Cloud Kerberos Trust for Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Configuring-Unix-Attribute-Synchronization-with-Azure-Entra-ID-Using-Microsoft-Entra-Connect-Sync/">Configuring Unix Attribute Synchronization with Azure Entra ID Using Microsoft Entra Connect Sync</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Configuring-a-Hardware-TPM-for-Secure-Key-Storage/">Configuring a Hardware TPM for Secure Key Storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Creating-an-Entra-ID-Application-for-Himmelblau-GroupMember.Read.All-Permissions/">Creating an Entra ID Application for Himmelblau GroupMember.Read.All Permissions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Design/">Design Principles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Device-Compliance-Settings-for-Linux-in-Intune-with-Himmelblau/">Device Compliance Settings for Linux in Intune with Himmelblau</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Enabling-the-Himmelblau-QR-Greeter-gnome%E2%80%90shell-Extension/">Enabling the Himmelblau QR Greeter gnome‐shell Extension</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/MS-specs-which-Himmelblau-uses/">MS specs which Himmelblau uses</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Syncing-Active-Directory-with-Azure-Entra-ID/">Syncing Active Directory with Azure Entra ID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/Tray-Icons-for-o365-on-GNOME-Shell/">Tray Icons for o365 on GNOME Shell</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Troubleshooting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/Capturing-authentication-traffic-using-cirrus%E2%80%90scope/">Capturing authentication traffic using cirrus‐scope</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/OpenSSH-Bug-2876-%E2%80%90--Unable-to-use-MFA-over-SSH-%E2%80%90-Workaround/">OpenSSH Bug 2876 ‐  Unable to use MFA over SSH ‐ Workaround</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/Removing-all-Hello-PINs-%26-cached-PRTs-on-a-Himmelblau-host/">Removing all Hello PINs & cached PRTs on a Himmelblau host</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/Testing-Himmelblau-Developer-Builds-with-Packet-Capture/">Testing Himmelblau Developer Builds with Packet Capture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/Troubleshooting%3A-%60The-user-%27...%27-already-exists%60-and-fake-users-listed-in-NSS/">Troubleshooting: `The user '...' already exists` and fake users listed in NSS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/Write-Permissions-for-the-%60logon_script%60-Parameter-in-Himmelblau/">Write Permissions for the `logon script` Parameter in Himmelblau</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Himmelblau Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Reference</li>
      <li class="breadcrumb-item active">Himmelblau conf</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/himmelblau-idm/site/edit/main/mkdocs/docs/reference/himmelblau-conf.md">Edit on Himmelblau Documentation</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="name">NAME</h2>
<p>himmelblau.conf - Configuration file for Himmelblau, enabling Azure Entra ID authentication on Linux. </p>
<h2 id="synopsis">SYNOPSIS</h2>
<p><strong>/etc/himmelblau/himmelblau.conf</strong> </p>
<h2 id="how-configuration-changes-are-applied">HOW CONFIGURATION CHANGES ARE APPLIED</h2>
<p>Changes to the configuration file <strong>/etc/himmelblau/himmelblau.conf</strong> only take effect after restarting the Himmelblau daemons. This includes the <strong>himmelblaud</strong> daemon, which handles authentication, and the <strong>himmelblaud-tasks</strong> daemon, which processes related tasks. </p>
<h4 id="restarting-the-daemons">Restarting the Daemons</h4>
<p>To apply changes, restart the Himmelblau services using the following systemd commands: </p>
<h5 id="examples">EXAMPLES</h5>
<p>sudo systemctl restart himmelblaud </p>
<pre><code>sudo systemctl restart himmelblaud-tasks
</code></pre>
<h2 id="description">DESCRIPTION</h2>
<p>The <strong>himmelblau.conf</strong> file is the primary configuration file for the Himmelblau authentication module. It defines global and optional settings required for Azure Entra ID-based authentication and device management. </p>
<h2 id="file-format">FILE FORMAT</h2>
<p>The file consists of sections headed by a name enclosed in square brackets. Each section contains parameters and their values in the format: </p>
<pre><code>parameter = value Lines beginning with a '#' are comments and are ignored by the parser.
</code></pre>
<h2 id="parameters">PARAMETERS</h2>
<h3 id="global">[global]</h3>
<p>This section contains settings that apply globally to all operations of Himmelblau. </p>
<h4 id="domains">domains</h4>
<p>A comma-separated list of primary domains for your Azure Entra ID tenants. This parameter is <strong>REQUIRED</strong> for successful authentication. If this option is not specified, no users will be permitted to authenticate. The first user to authenticate to each domain will become the owner of the device object in the directory. Specify ONLY the primary domain for each tenant. Specifying multiple custom domains which belong to a single tenant will cause an idmap range overlap and the himmelblaud daemon will NOT start. If multiple domains are specified, you <strong>MUST</strong> define an <strong>idmap_range</strong> for each domain to avoid conflicts in user and group ID mappings. Overlapping ID ranges will cause the idmapper to throw a critical error and stop the daemon. This safeguard ensures that two users are not mistakenly mapped to the same UID. </p>
<h5 id="examples_1">EXAMPLES</h5>
<p>domains = example.com,example2.com [example.com] idmap_range = 5000000-5999999 [example2.com] idmap_range = 6000000-6999999 </p>
<h4 id="debug">debug</h4>
<p>A boolean option that enables debug-level logging. When set to <strong>true,</strong> debug messages are output to the system journal. </p>
<h5 id="examples_2">EXAMPLES</h5>
<p>debug = true </p>
<h4 id="pam_allow_groups">pam_allow_groups</h4>
<p>A comma-separated list of Entra Id Users and Groups permitted to access the system. Users should be specified by UPN. Groups MUST be specified using their Object ID GUID. Group names may not be used because these names are not guaranteed to be unique in Entra Id. </p>
<h5 id="examples_3">EXAMPLES</h5>
<p>pam_allow_groups = f3c9a7e4-7d5a-47e8-832f-3d2d92abcd12,5ba4ef1d-e454-4f43-ba7c-6fe6f1601915,admin@himmelblau-idm.org </p>
<h4 id="id_attr_map">id_attr_map</h4>
<p>Specify whether to map uid/gid based on the object name, the object uuid, or based on the rfc2307 schema extension attributes synchronized from an on-prem Active Directory instance. Mapping by name or by rfc2307 is recommeneded. </p>
<h5 id="examples_4">EXAMPLES</h5>
<p>id_attr_map = &lt;name|uuid|rfc2307&gt; </p>
<h4 id="rfc2307_group_fallback_map">rfc2307_group_fallback_map</h4>
<p>Specify whether to map group IDs (GIDs) based on the object name or object UUID when no <strong>gidNumber</strong> attribute is found in an on-prem Active Directory instance synchronized to Azure Entra ID. This option is only applicable if <strong>id_attr_map</strong> is set to <strong>rfc2307.</strong> If <strong>id_attr_map = rfc2307</strong> and a group does not have a <strong>gidNumber</strong> defined in the directory, this setting determines the fallback method for mapping the group ID. If this option is not set, groups without a <strong>gidNumber</strong> will not be available to NSS. </p>
<h5 id="examples_5">EXAMPLES</h5>
<p>rfc2307_group_fallback_map = &lt;name|uuid&gt; </p>
<h4 id="odc_provider">odc_provider</h4>
<p>Specifies the hostname for sending federationProvider requests. </p>
<h5 id="examples_6">EXAMPLES</h5>
<p>odc_provider = odc.officeapps.live.com </p>
<h4 id="enable_hello">enable_hello</h4>
<p>Enables or disables user enrollment in Windows Hello authentication. If disabled, users will need to provide MFA for each login. </p>
<h5 id="examples_7">EXAMPLES</h5>
<p>enable_hello = false </p>
<h4 id="hello_pin_min_length">hello_pin_min_length</h4>
<p>The minimum length of the PIN for Windows Hello authentication. The value must be between 6 and 32 characters. </p>
<h5 id="examples_8">EXAMPLES</h5>
<p>hello_pin_min_length = 8 </p>
<h4 id="hello_pin_retry_count">hello_pin_retry_count</h4>
<p>The number of invalid Hello PIN attempts allowed before the user is required to perform MFA. After successful MFA, the user will be prompted to set a new PIN. The value must be a non-negative integer. </p>
<h5 id="examples_9">EXAMPLES</h5>
<p>hello_pin_retry_count = 3 </p>
<h4 id="hello_pin_prompt">hello_pin_prompt</h4>
<p>Customizes the prompt text shown when requesting the user’s Linux Hello PIN. If not set, the default prompt is: </p>
<p>Use the Linux Hello PIN for this device. </p>
<h5 id="examples_10">EXAMPLES</h5>
<p>hello_pin_prompt = Enter your device unlock PIN </p>
<h4 id="entra_id_password_prompt">entra_id_password_prompt</h4>
<p>Customizes the prompt text shown when requesting the user’s Entra ID password. If not set, the default prompt is: </p>
<p>Use the password for your Office 365 or Microsoft online login. </p>
<h5 id="examples_11">EXAMPLES</h5>
<p>entra_id_password_prompt = Enter your Microsoft 365 password </p>
<h4 id="enable_sfa_fallback">enable_sfa_fallback</h4>
<p>Determines whether password-only (single-factor) authentication is permitted when MFA is unavailable. Disabled by default. </p>
<h5 id="examples_12">EXAMPLES</h5>
<p>enable_sfa_fallback = true </p>
<h4 id="cn_name_mapping">cn_name_mapping</h4>
<p>Allows users to enter the short form of their username (e.g., 'dave') instead of the full UPN. </p>
<h5 id="examples_13">EXAMPLES</h5>
<p>cn_name_mapping = true </p>
<h4 id="local_groups">local_groups</h4>
<p>A comma-separated list of local groups that every Entra ID user should be a member of. For example, you may wish for all Entra ID users to be a member of the sudo group. WARNING: This setting will not REMOVE group member entries when groups are removed from this list. You must remove them manually. </p>
<h5 id="examples_14">EXAMPLES</h5>
<p>local_groups = sudo,admin </p>
<h4 id="logon_script">logon_script</h4>
<p>A script that will execute every time a user logs on. Two environment variables are set: USERNAME, and ACCESS_TOKEN. The ACCESS_TOKEN environment variable is an access token for the MS Graph. The token scope config option sets the comma-separated scopes that should be requested for the ACCESS_TOKEN. ACCESS_TOKEN will be empty during offline logon. The return code of the script determines how authentication proceeds. 0 is success, 1 is a soft failure and authentication will proceed, while 2 is a hard failure causing authentication to fail. The <strong>app_id</strong> option <strong>MUST</strong> be set for each domain to ensure the <strong>logon_token_scopes</strong> option has the correct API permissions. Failing to do so will prevent the <strong>logon_script</strong> from executing. </p>
<h5 id="examples_15">EXAMPLES</h5>
<p>logon_script = /etc/himmelblau/logon.sh </p>
<h4 id="logon_token_scopes">logon_token_scopes</h4>
<p>A comma-separated list of the scopes to be requested for the ACCESS_TOKEN during logon. These scopes <strong>MUST</strong> correspond to the API permissions assigned to the Entra Id Application specified by the <strong>app_id</strong> domain option. </p>
<h5 id="examples_16">EXAMPLES</h5>
<p>logon_token_scopes = user.read,mail.read </p>
<h4 id="enable_experimental_mfa">enable_experimental_mfa</h4>
<p>A boolean option that enables the experimental multi-factor authentication (MFA) flow, which permits Hello authentication. This experimental flow may encounter failures in certain edge cases. If disabled, the system enforces the Device Authorization Grant (DAG) flow for MFA, which is more robust but does not support Hello authentication. By default, this option is enabled. </p>
<h5 id="examples_17">EXAMPLES</h5>
<p>enable_experimental_mfa = true </p>
<h4 id="enable_experimental_passwordless_fido">enable_experimental_passwordless_fido</h4>
<p>A boolean option that enables the experimental passwordless FIDO flow for Azure Entra ID authentication. When enabled, Himmelblau will attempt to authenticate with Entra ID using a FIDO2 security key without requiring a password. By default, this option is disabled. </p>
<h5 id="examples_18">EXAMPLES</h5>
<p>enable_experimental_passwordless_fido = true </p>
<h4 id="name_mapping_script">name_mapping_script</h4>
<p>Specifies the path to an executable script used for mapping custom names to UPN names. The script MUST accept a single argument, which will always be a mapped name. The script MUST print the corresponding UPN (User Principal Name) to stdout. If the script does not recognize the input name, it MUST simply return the input name unchanged. This option is particularly useful in environments where direct UPN-to-CN mappings are impractical or where custom transformations are required. The script must handle the input gracefully and return the correct UPN or the input name if unrecognized. Errors must be handled to avoid authentication failures. </p>
<h5 id="examples_19">EXAMPLES</h5>
<p>name_mapping_script = /path/to/mapping_script.sh Example Script: </p>
<pre><code>#!/bin/bash
# Convert CN to UPN, or return the input name if unrecognized
if [[ &quot;$1&quot; =~ ^[a-zA-Z0-9._-]+$ ]]; then
    echo &quot;$1@example.com&quot;
else
    echo &quot;$1&quot;
fi
</code></pre>
<ul>
<li><strong>apply_policy</strong> </li>
</ul>
<p>A boolean option that enables the application and enforcement of Intune policies to the authenticated user. By default, this option is disabled. </p>
<h5 id="examples_20">EXAMPLES</h5>
<p>apply_policy = false </p>
<h4 id="enable_experimental_intune_custom_compliance">enable_experimental_intune_custom_compliance</h4>
<p>A boolean option that enables support for Linux Intune Custom Compliance policies. This feature is experimental and not yet fully functional. While policy settings should be applied locally, the compliance status is not reliably reported to Intune, and failed policies do not currently block authentication. By default, this option is disabled. This option requires <code>apply_policy = true</code>. </p>
<h5 id="examples_21">EXAMPLES</h5>
<p>enable_experimental_intune_custom_compliance = true </p>
<h4 id="authority_host">authority_host</h4>
<p>Specifies the hostname for Microsoft authentication. The default value is <strong>login.microsoftonline.com.</strong> </p>
<h5 id="examples_22">EXAMPLES</h5>
<p>authority_host = login.microsoftonline.com </p>
<h4 id="db_path">db_path</h4>
<p>The location of the cache database. This file is used to store cached authentication data and device state. </p>
<h5 id="examples_23">EXAMPLES</h5>
<p>db_path = /var/cache/himmelblau/himmelblau.cache.db </p>
<h4 id="hsm_type">hsm_type</h4>
<p>Specifies how Himmelblau should handle secure key storage. This option determines whether to use a software-based HSM, a TPM (Trusted Platform Module), or a hybrid approach. The available options are:</p>
<ul>
<li>
<p><strong>soft</strong> – Use a software-based HSM that encrypts key material locally on the system.</p>
</li>
<li>
<p><strong>tpm</strong> – Use a hardware TPM exclusively for storing and binding cryptographic keys.</p>
</li>
<li>
<p><strong>tpm_if_possible</strong> – Attempt to use a hardware TPM if available; if not, fall back to the software HSM. If the TPM has previously been used for key storage, the system will not fall back to the software HSM. The default is <strong>soft</strong> his setting is important for protecting sensitive cryptographic keys in a secure environment, reducing the risk of compromise if the system is breached.</p>
</li>
</ul>
<h5 id="examples_24">EXAMPLES</h5>
<p>hsm_type = soft </p>
<h4 id="tpm_tcti_name">tpm_tcti_name</h4>
<p>Specifies the TCTI (Trusted Computing Technology Interface) to use when communicating with a Trusted Platform Module (TPM) for secure key operations. This setting is only relevant when <strong>hsm_type</strong> is set to <strong>tpm</strong> or <strong>tpm_if_possible.</strong> Common values include:</p>
<ul>
<li><strong>device:/dev/tpmrm0</strong> – This uses the kernel TPM resource manager device, which is the recommended default for most Linux systems. Other TCTI strings may be required depending on your system’s TPM driver or configuration. This option allows advanced control over how Himmelblau connects to the TPM for performing cryptographic operations. </li>
</ul>
<h5 id="examples_25">EXAMPLES</h5>
<p>tpm_tcti_name = device:/dev/tpmrm0 </p>
<h4 id="hsm_pin_path">hsm_pin_path</h4>
<p>The location where the HSM (Hardware Security Module) PIN will be stored. This PIN is used to protect sensitive cryptographic operations. </p>
<h5 id="examples_26">EXAMPLES</h5>
<p>hsm_pin_path = /var/lib/himmelblaud/hsm-pin </p>
<h4 id="socket_path">socket_path</h4>
<p>The path to the socket file for communication between the pam and nss modules and the Himmelblau daemon. </p>
<h5 id="examples_27">EXAMPLES</h5>
<p>socket_path = /var/run/himmelblaud/socket </p>
<h4 id="task_socket_path">task_socket_path</h4>
<p>The path to the socket file for communication with the task daemon. </p>
<h5 id="examples_28">EXAMPLES</h5>
<p>task_socket_path = /var/run/himmelblaud/task_sock </p>
<h4 id="broker_socket_path">broker_socket_path</h4>
<p>The path to the socket file for communication with the broker DBus service. </p>
<h5 id="examples_29">EXAMPLES</h5>
<p>broker_socket_path = /var/run/himmelblaud/broker_sock </p>
<h4 id="home_prefix">home_prefix</h4>
<p>The prefix to use for user home directories. </p>
<h5 id="examples_30">EXAMPLES</h5>
<p>home_prefix = /home/ </p>
<h4 id="home_attr">home_attr</h4>
<p>The attribute used to create a home directory for a user. Available options include: </p>
<ul>
<li>
<p>UUID (default) </p>
</li>
<li>
<p>SPN </p>
</li>
<li>
<p>CN </p>
</li>
</ul>
<h5 id="examples_31">EXAMPLES</h5>
<p>home_attr = UUID </p>
<h4 id="home_alias">home_alias</h4>
<p>The symlinked alias for the user's home directory. Available options include: </p>
<ul>
<li>
<p>UUID </p>
</li>
<li>
<p>SPN (default) </p>
</li>
<li>
<p>CN </p>
</li>
</ul>
<h5 id="examples_32">EXAMPLES</h5>
<p>home_alias = SPN </p>
<h4 id="shell">shell</h4>
<p>The default shell for users. This will be assigned when the user logs in. </p>
<h5 id="examples_33">EXAMPLES</h5>
<p>shell = /bin/bash </p>
<h4 id="idmap_range">idmap_range</h4>
<p>Specifies the range of IDs to be used for the user and group mappings. When this option is modified, you <strong>SHOULD</strong> run: </p>
<p>sudo aad-tool cache-clear --really To ensure that old cached ID mappings are cleared, preventing potential UID overlaps caused by stale cache data. </p>
<h5 id="examples_34">EXAMPLES</h5>
<p>idmap_range = 5000000-5999999 </p>
<h4 id="connection_timeout">connection_timeout</h4>
<p>The timeout for connections to the authentication server. Default is 2 seconds. </p>
<h5 id="examples_35">EXAMPLES</h5>
<p>connection_timeout = 5 </p>
<h4 id="cache_timeout">cache_timeout</h4>
<p>The timeout for caching authentication data. Default is 300 seconds (5 minutes). </p>
<h5 id="examples_36">EXAMPLES</h5>
<p>cache_timeout = 10 </p>
<h4 id="use_etc_skel">use_etc_skel</h4>
<p>If set to <strong>true,</strong> Himmelblau will use the contents of /etc/skel when creating new user directories. </p>
<h5 id="examples_37">EXAMPLES</h5>
<p>use_etc_skel = false </p>
<h4 id="selinux">selinux</h4>
<p>Whether SELinux security labels should be applied to users' home directories. Set to <strong>true</strong> to enable. </p>
<h5 id="examples_38">EXAMPLES</h5>
<p>selinux = true </p>
<h2 id="domain-specific-sections">DOMAIN-SPECIFIC SECTIONS</h2>
<p>Overrides can be defined for individual domains by using a section named after the domain in square brackets. </p>
<h3 id="examplecom">[example.com]</h3>
<p>This section allows customization of specific parameters for the domain <strong>example.com.</strong> Domain-specific sections override global values for the specified domain. </p>
<h4 id="odc_provider_1">odc_provider</h4>
<p>Overrides the <code>odc_provider</code> value for this domain. </p>
<h5 id="examples_39">EXAMPLES</h5>
<p>[example.com] odc_provider = custom.odcprovider.example.com </p>
<h4 id="home_prefix_1">home_prefix</h4>
<p>Overrides the <code>home_prefix</code> value for this domain. </p>
<h5 id="examples_40">EXAMPLES</h5>
<p>[example.com] home_prefix = /home/ </p>
<h4 id="home_attr_1">home_attr</h4>
<p>Overrides the <code>home_attr</code> value for this domain. </p>
<h5 id="examples_41">EXAMPLES</h5>
<p>[example.com] home_attr = UUID </p>
<h4 id="home_alias_1">home_alias</h4>
<p>Overrides the <code>home_alias</code> value for this domain. </p>
<h5 id="examples_42">EXAMPLES</h5>
<p>[example.com] home_alias = SPN </p>
<h4 id="shell_1">shell</h4>
<p>Overrides the <code>shell</code> value for this domain. </p>
<h5 id="examples_43">EXAMPLES</h5>
<p>[example.com] shell = /bin/bash </p>
<h4 id="idmap_range_1">idmap_range</h4>
<p>Overrides the <code>idmap_range</code> value for this domain. When this option is modified, you <strong>SHOULD</strong> run: </p>
<p>sudo aad-tool cache-clear --really To ensure that old cached ID mappings are cleared, preventing potential UID overlaps caused by stale cache data. </p>
<h5 id="examples_44">EXAMPLES</h5>
<p>[example.com] idmap_range = 5000000-5999999 </p>
<h4 id="logon_token_app_id">logon_token_app_id</h4>
<p>Specifies the Entra ID application ID to be used when requesting an ACCESS_TOKEN on behalf of the user for the logon script. If not set, the domain’s <strong>app_id</strong> will be used instead. This option allows configuring a separate application ID specifically for logon token requests, ensuring the correct API permissions are applied. </p>
<p><strong>Note:</strong> In the Azure Portal for the application corresponding to <strong>logon_token_app_id</strong>, ensure that the redirect URI <em>https://login.microsoftonline.com/common/oauth2/nativeclient</em> is enabled in the application's Authentication section under “Mobile and desktop applications.” This is required so that Himmelblau can obtain the necessary tokens. </p>
<h5 id="examples_45">EXAMPLES</h5>
<p>[example.com] logon_token_app_id = 544e695f-5d78-442e-b14e-e114e95e640c </p>
<h4 id="app_id">app_id</h4>
<p>Specifies the Entra ID application identifier that permits Himmelblau to fetch the <strong>gidNumber</strong> extended attribute using the <strong>GroupMember.Read.All</strong> API permission for rfc2307 idmapping. If <strong>logon_token_app_id</strong> is not set, this app_id will also be used for requesting access tokens for the logon script. </p>
<p><strong>Note:</strong> For the application corresponding to <strong>app_id</strong>, ensure that the redirect URI <em>himmelblau://Himmelblau.EntraId.BrokerPlugin</em> is added in the application's Authentication section under “Mobile and desktop applications” in the Azure Portal. This allows Himmelblau to properly handle token redirection for the extended attribute lookups. </p>
<h5 id="examples_46">EXAMPLES</h5>
<p>[example.com] app_id = d023f7aa-d214-4b59-911d-6074de623765 </p>
<h2 id="see-also">SEE ALSO</h2>
<p><strong>himmelblaud(8),</strong> <strong>himmelblaud-tasks(8)</strong> </p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../aad-tool/" class="btn btn-neutral float-left" title="Aad tool"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../himmelblaud/" class="btn btn-neutral float-right" title="Himmelblaud">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/himmelblau-idm/site.git" class="fa fa-code-fork" style="color: #fcfcfc"> Himmelblau Documentation</a>
        </span>
    
    
      <span><a href="../aad-tool/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../himmelblaud/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../js/distro_list.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
